---
import { recipes, getRecipeBySlug } from '../../data/recipes';

export async function getStaticPaths() {
  return recipes.map(recipe => ({
    params: { slug: recipe.slug }
  }));
}

const { slug } = Astro.params;
const recipe = getRecipeBySlug(slug!);

if (!recipe) {
  throw new Error(`Recipe with slug "${slug}" not found`);
}
---

<html>
<head>
  <title>{recipe.name}</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E%E2%AD%90%3C/text%3E%3C/svg%3E" />
  <style>
    body { 
      font-family: Georgia, serif;
      max-width: 800px; 
      margin: 0 auto; 
      padding: 60px 40px;
      line-height: 1.8;
      color: #333;
      background: #fff;
    }
    .back-link {
      color: #666;
      text-decoration: underline;
      margin-bottom: 40px;
      display: inline-block;
      font-size: 0.9rem;
    }
    .back-link:hover {
      color: #333;
    }
    h1 {
      font-size: 1.5rem;
      font-weight: normal;
      margin-bottom: 40px;
      text-align: center;
      letter-spacing: 0.5px;
    }
    h3 {
      font-size: 1.1rem;
      font-weight: normal;
      margin: 30px 0 15px 0;
      letter-spacing: 0.3px;
    }
    .recipe-description {
      font-style: italic;
      color: #666;
      margin: 20px 0 40px 0;
      text-align: center;
      font-size: 0.95rem;
      line-height: 1.6;
    }
    .ingredients ul {
      margin: 0;
      padding-left: 20px;
      list-style-type: disc;
    }
    .ingredients li {
      margin: 5px 0;
    }
    .instructions p {
      margin: 15px 0;
      text-align: justify;
    }
    .recipe-meta {
      margin: 30px 0;
      color: #666;
      font-size: 0.9rem;
    }
    .meta-item {
      margin: 8px 0;
    }
    .recipe-images {
      display: flex;
      gap: 10px;
      margin: 30px 0;
    }
    .recipe-image {
      width: 200px;
      height: 200px;
      background: #f0f0f0;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      color: #999;
      overflow: hidden;
    }
    .recipe-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <a href="/" class="back-link">back to contents</a>
  
  <h1># {recipe.name}</h1>
  
  <div class="recipe-description">
    {recipe.description}
  </div>
  
  <div class="recipe-meta">
    <div class="meta-item">
      <strong>cuisine:</strong> {recipe.cuisine}
    </div>
    <div class="meta-item">
      <strong>meal:</strong> {recipe.type}
    </div>
    <!-- <div class="meta-item">
      <strong>time:</strong> {recipe.time}
    </div> -->
    <!-- <div class="meta-item">
      <strong>date added:</strong> {recipe.date}
    </div> -->
  </div>

  <div class="recipe-images">
    {recipe.images.map((image: string) => (
      <div class="recipe-image">
        <img src={`/${image}`} alt={recipe.name} />
      </div>
    ))}
  </div>
  
  <div class="ingredients">
    <h3>ingredients</h3>
    <ul>
      {recipe.ingredients.map((ingredient: string) => (
        <li>{ingredient}</li>
      ))}
    </ul>
  </div>
  
  <div class="instructions">
    <h3>instructions</h3>
    <p set:html={recipe.instructions}></p>
  </div>
</body>
</html>
